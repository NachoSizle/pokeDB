---
// ðŸŽ¨ Tarjeta de PokÃ©mon - Componente optimizado para rendimiento
import type { PokemonDetails } from '../services/pokemon';
import { getTypeColor, capitalize } from '../services/pokemon';

export interface Props {
  pokemon: PokemonDetails;
}

const { pokemon } = Astro.props;

// Obtener la imagen de mejor calidad disponible
const imageUrl = pokemon.sprites.other['official-artwork']?.front_default || pokemon.sprites.front_default;

// Obtener el tipo principal para el color de fondo
const primaryType = pokemon.types[0]?.type.name || 'normal';
const typeColorGradient = getTypeColor(primaryType);
---

<article 
  class={`pokemon-card relative overflow-hidden rounded-2xl bg-slate-800/50 border border-slate-700/50 p-6 backdrop-blur-sm hover:border-purple-500/50 type-${primaryType}`}
>
  <!-- NÃºmero del PokÃ©mon -->
  <div class="absolute top-4 right-4 z-10 bg-black/40 backdrop-blur-sm rounded-lg px-2 py-1 text-xs font-mono text-slate-200 font-semibold border border-slate-600/50">
    #{pokemon.id.toString().padStart(3, '0')}
  </div>
  
  <!-- Imagen del PokÃ©mon -->
  <div class="relative mb-4">
    <div class={`absolute inset-0 bg-gradient-to-br ${typeColorGradient} opacity-20 rounded-xl blur-xl`}></div>
    <div class="relative bg-slate-700/30 rounded-xl p-4 backdrop-blur-sm">
      <img 
        src={imageUrl}
        alt={`${capitalize(pokemon.name)} - PokÃ©mon`}
        class="w-full h-32 object-contain drop-shadow-2xl"
        loading="lazy"
        decoding="async"
        width="128"
        height="128"
      />
    </div>
  </div>
  
  <!-- InformaciÃ³n del PokÃ©mon -->
  <div class="space-y-3">
    <!-- Nombre -->
    <h3 class="text-xl font-bold text-white capitalize tracking-wide">
      {pokemon.name}
    </h3>
    
    <!-- Tipos -->
    <div class="flex gap-2 flex-wrap">
      {pokemon.types.map((typeInfo) => (
        <span 
          class={`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium text-white bg-gradient-to-r ${getTypeColor(typeInfo.type.name)} shadow-lg`}
        >
          {capitalize(typeInfo.type.name)}
        </span>
      ))}
    </div>
    
    <!-- EstadÃ­sticas bÃ¡sicas -->
    <div class="grid grid-cols-2 gap-3 text-sm">
      <div class="bg-slate-700/30 rounded-lg p-2 backdrop-blur-sm">
        <span class="text-slate-400 block text-xs">Altura</span>
        <span class="text-white font-semibold">{pokemon.height / 10} m</span>
      </div>
      <div class="bg-slate-700/30 rounded-lg p-2 backdrop-blur-sm">
        <span class="text-slate-400 block text-xs">Peso</span>
        <span class="text-white font-semibold">{pokemon.weight / 10} kg</span>
      </div>
    </div>
    
    <!-- BotÃ³n para ver detalles -->
    <a 
      href={`/pokemon/${pokemon.id}`}
      class={`block w-full py-3 px-4 rounded-xl font-medium text-center text-white bg-gradient-to-r ${typeColorGradient} hover:scale-[1.02] transition-all duration-200 shadow-lg hover:shadow-xl`}
    >
      Ver detalles â†’
    </a>
  </div>
</article>

<style>
  .pokemon-card {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  .pokemon-card:hover {
    transform: translateY(-4px);
  }
</style>
